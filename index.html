<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ChatJenny</title>
	<link rel="stylesheet" href="css/styles.css">
</head>
<body>
	<div class="chat-header">Hello Jenny</div>
	<img src="images/chatJenny_bg.jpg" class="bg_image"/>
	<div class="chat-messages"></div>
	<div class="input">
		<textarea id="inputBox" placeholder="Hello Jenny!" rows="1" class="inputBox"></textarea>
		<button id="chatSubmit" title="发送消息">
            <img src="images/send.png" class="sendImages">
        </button>
		<!-- <button class="chatSubmit" id ="chatSubmit">CHAT</button> -->
	</div>
</body>
<script src="js/jquery-3.7.1.min.js"></script>
<script type="text/javascript">
	// $(function() {
		var chatSubmit = $("#chatSubmit").on('click',sendMessage);
		const messageInput = document.getElementById('inputBox');

		// 发送消息
        function sendMessage() {
            const message = $('#inputBox').val().trim();
            if (message) {
                addMessage(message, 'sent');
                $('#inputBox').val('');
                
                // 模拟回复
                setTimeout(() => {
                    addMessage(getReplyMessage(), 'received');
                }, 500);
            }
        }
        
        // 添加消息到聊天框
        function addMessage(text, type) {
            const now = new Date();
            const timeString = now.getHours() + ':' + (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();
            
            const messageElement = document.createElement('div');
            messageElement.className = `message ${type}`;
             if (text.length < 20) {
                messageElement.classList.add('short');
            }
            
            messageElement.innerHTML = `<span>${text}</span>`;
            console.log()
            $('.chat-messages').append(messageElement);
            $('.chat-messages').scrollTop =  $('.chat-messages').scrollHeight;
        }

	function getReplyMessage() {
		var sourceArray=['Love you!','I love you! ','I love you more than anything!','You’re the best!','You deserve all the best!','You have my heart ','You know I love you ','Kiss kiss','Honey honey~','爱你~','我爱你！','就算回答一万次我还是爱你','你是最棒的','我比昨天更爱你一点','抱抱小宝宝','贴贴！','早安午安晚安我爱你','宝宝宝宝，喜欢宝宝','宝宝宝宝，心里都是宝宝','无论怎么样我都爱你']
		var randomNumber = getRandomInt(1, sourceArray.length);
		return sourceArray[randomNumber]
	}
	function getRandomInt(min, max) {
	    return Math.floor(Math.random() * (max - min + 1)) + min;
	}
</script>
</html>